type Nft @entity {
  id: ID! # tokenId + tokenAddress
  address: String!
  tokenId: BigInt!
  owner: Account!
  rolesHistory: [Role!] @derivedFrom(field: "nft")
}

type Account @entity {
  id: ID! # address
  nfts: [Nft!] @derivedFrom(field: "owner")
  roleApprovals: [RoleApproval!] @derivedFrom(field: "grantor")
}

type Role @entity {
  id: ID! # grantorAddress + tokenId + tokenAddress + granteeAddress + roleHash
  roleId: Bytes!
  nft: Nft!
  grantor: Account!
  grantee: Account!
  expirationDate: BigInt!
  revocable: Boolean!
  data: Bytes!
}

type RoleApproval @entity {
  id: ID! # grantorAddress + operatorAddress + tokenAddress
  grantor: Account!
  operator: Account!
  tokenAddress: String!
}
